# mukube-configurator

## About

This is the repository for the configuration of a bare metal high available kubernetes cluster with load-balancing services supported. Outputs a tarball that can should be unpacked in the root of a linux filesystem. The cluster assumes a systemd cgroups are used as well as CRIO as the container runtime.

## Structure
The entry point for the project is the `Makefile` in the root folder, which reads the `config` file, located in the `config` directory, for a full cluster setup.

After creating the configuration files the config partitions are generated by runnig `make`. Use `make clean` to get rid of artifacts.

### [config/config](docs/config.md)

### config/helm_requirements.txt
All helm charts repos listed in this file will be downloaded and packed into the tarball. The charts will then be installed by the node that creates the cluster. Each line in the file should contain 3 things, seperated by a `%`: First the release name, second the namespace and lastly the url of the repo.

### config/values/<helm release>.yaml
Values to use for the helm release.

### Dependencies
`e2fsprogs` is required for creating the ext4 filesystem.

`yq` is required for parsing YAML. 
